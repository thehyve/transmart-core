<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<!--
  ~ Copyright (c) 2019  The Hyve B.V.
  ~  This file is distributed under the GNU General Public License
  ~  (see accompanying file LICENSE).
  -->
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">
    <changeSet author="artur@thehyve.nl" id="20191907041159-0">
        <sql endDelimiter=";">
            create schema biomart_user
        </sql>
    </changeSet>
    <changeSet author="artur@thehyve.nl" id="20191907041159-1">
        <createView fullDefinition="false" viewName="patient_num_boundaries" schemaName="biomart_user">
            SELECT Min(patient_dimension.patient_num) AS min_patient_num,
                   Max(patient_dimension.patient_num) AS max_patient_num,
                   ( ( Max(patient_dimension.patient_num) - Min(
                       patient_dimension.patient_num) ) +
                     (
                       1 ) :: NUMERIC )               AS diameter
            FROM   i2b2demodata.patient_dimension;
        </createView>
    </changeSet>
</databaseChangeLog>
